<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--[if lt IE 9]>
<script src="../common/js/html5shiv.js"></script>
<![endif]-->
<meta name="viewport" content="width=device-width, maximum-scale=1, minimum-scale=1, user-scalable=no" />
<meta name="format-detection" content="telephone=no">

<title>triming
</title>
<!--<link type="text/css" rel="stylesheet" href="common/css/common.css" media="screen" />-->

<link type="text/css" rel="stylesheet" href="/common/css/webdesign_triming.css" media="screen" />

<script type="text/javascript" src="../common/js/jquery-2.1.3.min.js"></script>
</head>

<body>





<div id="imgList" style="-webkit-transform:translate3d(0%, 0%, 0px);">

    <div style="-webkit-transform:translate3d(-100%, 0%, 0px);"><img src="/common/img/download1.jpg" id="img01"></div>・・・画像a

</div>

<div id="animationLayer"></div>

<!--
<script type="text/javascript" src="/common/js/hammer.min.js"></script>
<script type="text/javascript" src="/common/js/jquery.hammer.js"></script>
<script type="text/javascript" src="/common/js/triming5.js"></script>
-->
<script>
var startDistance;
var moveDistance;
var currentScale = 1;
var saveScale = 1; //拡大率（縮小率）の初期値
var eventKind = '';
var elm = document.getElementById('animationLayer'); //タップを取得するエレメントを定義
var img = document.getElementById('img01'); //拡大させる画像を定義

elm.addEventListener('touchstart', touchStart, false);//タップされた瞬間
elm.addEventListener('touchstart', touchMove, false);//指を動かしている
elm.addEventListener('touchstart', touchEnd, false);//指が画面から離れた

//タップされた瞬間に実行されるメソッド
function touchStart(e) {
    switch (e.touches.length) {
      case 1:
        eventKind = 'flick';
      case 2:
        eventKind = 'pinch';
        pinchStart(e);
        break;
      default:
        break;
    }
}

//指が動いている時に実行されるメソッド
function touchMove(e) {
    e.preventDefault();
    switch (e.touches.length) {
      case 2:
        pinchMove(e);
        break;
      default:
        break;
    }
}

//指が離れた時に実行されるメソッド
function touchEnd(e) {
    switch (eventKind) {
      case 'pinch':
        pinchEnd(e);
        break;
      default:
        break;
    }
}


function pinchStart(e){

  //スタート時の指の距離を保持
  startDistance = getDistance(e);

}

function pinchMove(e){

  //2本指の距離を計算
  moveDistance = getDistance(e);

  //start時の距離を基準に動いた比率を計算
  currentScale = moveDistance / startDistance;

  //拡大率を算出
  saveScale = saveScale * currentScale;

  img.style.webkitTransform =
    'scale3d(' + saveScale + ',' + saveScale + ', 1)';
}

function pinchEnd(e){
  if(saveScale < 1){
    saveScale = 1;
    img.style.webkitTransform =
      'scale3d(' + saveScale + ',' + saveScale + ', 1)';
  }
}

//指の距離を測るメソッド.
function getMeasure(e) {
 return Math.sqrt(
     Math.pow(
         Number(e.touches[0].pageX) - Number(e.touches[1].pageX), 2) +
     Math.pow(
         Number(e.touches[0].pageY) - Number(e.touches[1].pageY), 2));
}
</script>

<!-- Scripts -->




</body>
</html>
